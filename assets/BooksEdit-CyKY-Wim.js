import{b as a}from"./book.service-Dh6xbj4K.js";import{h as p,_ as h,c as r,a as s,t as b,i as m,w as n,v as l,j as f,F as c,r as g,d as k,o as u}from"./index-B0eqtc4n.js";class x{constructor(e="/api/publishers"){this.api=p(e)}async getAll(){return(await this.api.get("/")).data}}const v=new x,y={name:"BookForm",data(){return{book:{tensach:"",tacgia:"",dongia:null,soquyen:null,namxuatban:null,manxb:null},selectedPublisher:"",newPublisher:{tennxb:"",diachi:""},publishers:[],isEditMode:!1}},computed:{bookId(){return this.$route.params.id}},created(){this.bookId?(this.isEditMode=!0,this.loadBookData(this.bookId)):this.isEditMode=!1,this.fetchPublishers()},methods:{async submitForm(){if(this.isEditMode)try{this.book.manxb=this.selectedPublisher,await a.update(this.bookId,this.book),alert("Sách được cập nhật thành công."),this.$router.push({name:"admin-books"})}catch(i){console.log(i)}else{this.selectedPublisher?this.book.manxb=this.selectedPublisher:(this.book.tennxb=this.newPublisher.tennxb,this.book.diachi=this.newPublisher.diachi);try{await a.create(this.book),alert("Sách được thêm thành công."),this.$router.push({name:"admin-books"})}catch(i){console.log(i)}}},async fetchPublishers(){try{const i=await v.getAll();this.publishers=i}catch(i){console.log(i)}},async loadBookData(i){try{const e=await a.get(i);this.selectedPublisher=e.nxb.manxb,this.book=e}catch(e){console.log(e)}}}},P={class:"form-container"},w={class:"form-card"},q={class:"form-title"},N={class:"form-group"},S={class:"input-group"},V={class:"form-group"},M={class:"input-group"},U={class:"form-group"},B={class:"input-group"},E={class:"form-group"},F={class:"input-group"},C={class:"form-group"},D={class:"input-group"},I={class:"form-group"},T={class:"input-group"},A=["value"],j={key:0,class:"form-group"},L={class:"input-group"};function z(i,e,G,H,t,d){return u(),r("div",P,[s("div",w,[s("h2",q,b(t.isEditMode?"Chỉnh sửa sách":"Thêm sách mới"),1),s("form",{onSubmit:e[8]||(e[8]=m((...o)=>d.submitForm&&d.submitForm(...o),["prevent"])),class:"form"},[s("div",N,[e[10]||(e[10]=s("label",{for:"tensach"},"Tựa sách",-1)),s("div",S,[e[9]||(e[9]=s("i",{class:"fa fa-book","aria-hidden":"true"},null,-1)),n(s("input",{type:"text",id:"tensach","onUpdate:modelValue":e[0]||(e[0]=o=>t.book.tensach=o),required:"",placeholder:"Nhập tựa sách"},null,512),[[l,t.book.tensach]])])]),s("div",V,[e[12]||(e[12]=s("label",{for:"tacgia"},"Tác giả",-1)),s("div",M,[e[11]||(e[11]=s("i",{class:"fa fa-user","aria-hidden":"true"},null,-1)),n(s("input",{type:"text",id:"tacgia","onUpdate:modelValue":e[1]||(e[1]=o=>t.book.tacgia=o),required:"",placeholder:"Nhập tên tác giả"},null,512),[[l,t.book.tacgia]])])]),s("div",U,[e[14]||(e[14]=s("label",{for:"dongia"},"Đơn giá",-1)),s("div",B,[e[13]||(e[13]=s("i",{class:"fa fa-dollar-sign","aria-hidden":"true"},null,-1)),n(s("input",{type:"number",id:"dongia","onUpdate:modelValue":e[2]||(e[2]=o=>t.book.dongia=o),required:"",min:"0",placeholder:"Nhập đơn giá"},null,512),[[l,t.book.dongia,void 0,{number:!0}]])])]),s("div",E,[e[16]||(e[16]=s("label",{for:"soquyen"},"Số lượng",-1)),s("div",F,[e[15]||(e[15]=s("i",{class:"fa fa-cogs","aria-hidden":"true"},null,-1)),n(s("input",{type:"number",id:"soquyen","onUpdate:modelValue":e[3]||(e[3]=o=>t.book.soquyen=o),required:"",min:"1",placeholder:"Nhập số lượng"},null,512),[[l,t.book.soquyen,void 0,{number:!0}]])])]),s("div",C,[e[18]||(e[18]=s("label",{for:"namxuatban"},"Năm xuất bản",-1)),s("div",D,[e[17]||(e[17]=s("i",{class:"fa fa-calendar","aria-hidden":"true"},null,-1)),n(s("input",{type:"number",id:"namxuatban","onUpdate:modelValue":e[4]||(e[4]=o=>t.book.namxuatban=o),required:"",min:"1000",max:"9999",placeholder:"Nhập năm xuất bản"},null,512),[[l,t.book.namxuatban,void 0,{number:!0}]])])]),s("div",I,[e[21]||(e[21]=s("label",{for:"manxb"},"Nhà xuất bản",-1)),s("div",T,[e[20]||(e[20]=s("i",{class:"fa fa-building","aria-hidden":"true"},null,-1)),n(s("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.selectedPublisher=o),class:"form-select border-0"},[e[19]||(e[19]=s("option",{value:""},"Chọn nhà xuất bản",-1)),(u(!0),r(c,null,g(t.publishers,o=>(u(),r("option",{key:o.manxb,value:o.manxb},b(o.tennxb),9,A))),128))],512),[[f,t.selectedPublisher]])])]),t.selectedPublisher?k("",!0):(u(),r("div",j,[e[23]||(e[23]=s("label",{for:"newPublisher"},"Nhà xuất bản mới",-1)),s("div",L,[e[22]||(e[22]=s("i",{class:"fa fa-map-marker","aria-hidden":"true"},null,-1)),n(s("input",{type:"text",class:"col-5 border-end-1","onUpdate:modelValue":e[6]||(e[6]=o=>t.newPublisher.tennxb=o),placeholder:"Nhập tên nhà xuất bản mới",required:""},null,512),[[l,t.newPublisher.tennxb]]),n(s("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>t.newPublisher.diachi=o),placeholder:"Nhập địa chỉ nhà xuất bản mới",required:""},null,512),[[l,t.newPublisher.diachi]])])])),e[24]||(e[24]=s("button",{type:"submit",class:"submit-btn"},"Submit",-1))],32)])])}const O=h(y,[["render",z]]);export{O as default};
