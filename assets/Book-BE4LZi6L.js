import{B as m}from"./BookCard-B9Ezp1Q5.js";import{P as p}from"./Pagination-BptQkxW5.js";import{b as d}from"./book.service-Dh6xbj4K.js";import{_ as k,c as h,a as r,w as P,v as _,F as f,r as B,e as y,g as l,o as n,D as b}from"./index-B0eqtc4n.js";const v={name:"Books",props:{page:{type:Number,required:!0},limit:{type:Number,required:!0}},components:{Pagination:p,BookCard:m},created(){this.fetchBooks(this.page,this.limit)},data(){return{books:[],currentPage:this.page,totalPages:1,searchQuery:""}},watch:{page(e){this.fetchBooks(e,this.limit)},limit(e){this.fetchBooks(this.page,e)},searchQuery(e){this.fetchBooks(this.page,this.limit,e)}},methods:{async fetchBooks(e=1,o=12,i=""){try{const s=await d.getAll({page:e,limit:o,search:i});console.log("Books:",s),this.books=s.books,this.totalPages=s.pagination.totalPages,this.currentPage=e}catch(s){console.error("Error fetching books:",s)}},handlePageChange(e){this.updateRoute(e)},updateRoute(e){this.$router.push({query:{...this.$route.query,page:e,search:this.searchQuery}})},onSearchInput(){this.currentPage=1,this.fetchBooks(this.currentPage,this.limit,this.searchQuery)}}},C={class:"p-5 container"},w={class:"row mb-4"},x={class:"col-12"},Q={class:"row"},S=["book"];function N(e,o,i,s,a,c){const u=l("BookCard"),g=l("Pagination");return n(),h("div",C,[r("div",w,[r("div",x,[P(r("input",{type:"text",class:"form-control",placeholder:"Nhập tên sách muốn tìm kiếm...","onUpdate:modelValue":o[0]||(o[0]=t=>a.searchQuery=t),onInput:o[1]||(o[1]=(...t)=>c.onSearchInput&&c.onSearchInput(...t))},null,544),[[_,a.searchQuery]])])]),r("div",Q,[(n(!0),h(f,null,B(a.books,t=>(n(),h("div",{class:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mb-4",key:t.masach,book:t},[(n(),b(u,{key:t.masach,book:t},null,8,["book"]))],8,S))),128))]),y(g,{currentPage:a.currentPage,totalPages:a.totalPages,pageSize:i.limit,onPageChanged:c.handlePageChange},null,8,["currentPage","totalPages","pageSize","onPageChanged"])])}const D=k(v,[["render",N]]);export{D as default};
