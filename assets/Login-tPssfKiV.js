import{h as m,_ as c,m as p,l as g,c as o,a as t,t as l,d as u,i as f,w as d,v as h,o as r}from"./index-DTQSZOVP.js";class b{constructor(s="/api/auth"){this.api=m(s)}async login(s){return(await this.api.post("/login",s)).data}async logout(s){return(await this.api.post("/logout",s)).data}}const y=new b,v={data(){return{dienthoai:"",matkhau:"",errorMessage:"",isSubmitting:!1}},computed:{...p("auth",["successMessage"])},methods:{...g("auth",["login"]),async handleSubmit(){this.isSubmitting=!0;try{const e=await y.login({dienthoai:this.dienthoai,matkhau:this.matkhau});this.login(e),this.dienthoai="",this.matkhau="",this.errorMessage="",e._id&&(e.quyen=="quanly"?this.$router.push("/admin"):e.quyen=="nhanvien"?this.$router.push("/staff"):this.$router.push("/home"))}catch(e){e.response&&e.response.data&&e.response.data.message?(this.errorMessage=e.response.data.message,this.$store.commit("auth/setSuccessMessage",null)):this.errorMessage="Đã có lỗi xảy ra. Vui lòng thử lại sau."}finally{this.isSubmitting=!1}}}},k={class:"d-flex justify-content-center align-items-center"},M={class:"card p-4 shadow-sm",style:{width:"100%","max-width":"400px"}},S={key:0,class:"alert alert-success"},w={key:1,class:"alert alert-danger"},_={class:"mb-3"},x={class:"mb-3"},q=["disabled"];function V(e,s,A,B,i,n){return r(),o("div",k,[t("div",M,[s[5]||(s[5]=t("h2",{class:"text-center mb-4"},"Đăng nhập",-1)),e.successMessage?(r(),o("div",S,l(e.successMessage),1)):u("",!0),i.errorMessage?(r(),o("div",w,l(i.errorMessage),1)):u("",!0),t("form",{onSubmit:s[2]||(s[2]=f((...a)=>n.handleSubmit&&n.handleSubmit(...a),["prevent"]))},[t("div",_,[s[3]||(s[3]=t("label",{for:"dienthoai",class:"form-label"},"Số điện thoại",-1)),d(t("input",{type:"text",id:"dienthoai",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=a=>i.dienthoai=a),required:""},null,512),[[h,i.dienthoai]])]),t("div",x,[s[4]||(s[4]=t("label",{for:"matkhau",class:"form-label"},"Mật khẩu",-1)),d(t("input",{type:"password",id:"matkhau",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=a=>i.matkhau=a),required:""},null,512),[[h,i.matkhau]])]),t("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isSubmitting}," Đăng nhập ",8,q)],32)])])}const D=c(v,[["render",V],["__scopeId","data-v-a98fdc94"]]);export{D as default};
