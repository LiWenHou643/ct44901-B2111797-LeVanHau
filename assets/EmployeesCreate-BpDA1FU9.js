import{e as c}from"./employee.service-C2Q4dsEX.js";import{c as f,a as l}from"./index.esm-BQ_k1baG.js";import{_ as y,c as o,a as s,i as b,w as a,v as d,t as u,d as m,b as g,o as n}from"./index-DTQSZOVP.js";const V={name:"EmployeeForm",data(){return{employee:{hotennv:"",chucvu:"Nhân viên",diachi:"",dienthoai:""},errors:{},isSubmitting:!1,isValid:!1}},watch:{employee:{handler(){this.isValid=this.validateForm()},deep:!0}},methods:{async submitForm(){if(this.isValid){this.isSubmitting=!0;try{await c.create({...this.employee,matkhau:this.generateRandomPassword()}),alert("Nhân viên được thêm thành công."),this.$router.push({name:"employees"})}catch(r){r.response&&r.response.data&&r.response.data.message?alert(r.response.data.message):alert("Có lỗi xảy ra. Vui lòng thử lại.")}finally{this.isSubmitting=!1}}},generateRandomPassword(){return Math.floor(1e5+Math.random()*9e5).toString()},validateForm(){this.errors={};let r=!0;const e=f({hotennv:l().min(3,"Họ và tên phải có ít nhất 3 ký tự").required("Họ và tên là bắt buộc"),chucvu:l().required("Chức vụ là bắt buộc"),dienthoai:l().matches(/^(\+84|0)\d{9}$/,"Số điện thoại không hợp lệ"),diachi:l().min(10,"Địa chỉ phải có ít nhất 10 ký tự").required("Địa chỉ là bắt buộc")});try{e.validateSync(this.employee,{abortEarly:!1})}catch(h){h.inner.forEach(p=>{this.errors[p.path]=p.message,r=!1})}return r}}},N={class:"form-container"},k={class:"form-card"},F={class:"form-group"},S={class:"input-group"},q={key:0,class:"error-message"},w={class:"form-group"},x={class:"input-group"},C={key:0,class:"error-message"},E={class:"form-group"},I={class:"input-group"},M={key:0,class:"error-message"},U={class:"form-group"},B={class:"input-group"},H={key:0,class:"error-message"},T=["disabled"];function D(r,e,h,p,t,v){return n(),o("div",N,[s("div",k,[e[17]||(e[17]=s("h2",{class:"form-title"},"Thêm Nhân Viên",-1)),s("form",{onSubmit:e[7]||(e[7]=b((...i)=>v.submitForm&&v.submitForm(...i),["prevent"])),ref:"form",class:"form"},[s("div",F,[e[9]||(e[9]=s("label",{for:"hotennv"}," Họ và tên ",-1)),s("div",S,[e[8]||(e[8]=s("i",{class:"fas fa-user"},null,-1)),a(s("input",{type:"text",id:"hotennv","onUpdate:modelValue":e[0]||(e[0]=i=>t.employee.hotennv=i),placeholder:"Nhập họ và tên",onInput:e[1]||(e[1]=i=>r.validateField("hotennv")),required:""},null,544),[[d,t.employee.hotennv]])]),t.errors.hotennv?(n(),o("span",q,u(t.errors.hotennv),1)):m("",!0)]),s("div",w,[e[11]||(e[11]=s("label",{for:"chucvu"}," Chức vụ ",-1)),s("div",x,[e[10]||(e[10]=s("i",{class:"fas fa-briefcase"},null,-1)),a(s("input",{type:"text",id:"chucvu","onUpdate:modelValue":e[2]||(e[2]=i=>t.employee.chucvu=i),placeholder:"Chọn chức vụ",required:"",readonly:""},null,512),[[d,t.employee.chucvu]])]),t.errors.chucvu?(n(),o("span",C,u(t.errors.chucvu),1)):m("",!0)]),s("div",E,[e[13]||(e[13]=s("label",{for:"diachi"}," Địa chỉ ",-1)),s("div",I,[e[12]||(e[12]=s("i",{class:"fas fa-map-marker-alt"},null,-1)),a(s("input",{type:"text",id:"diachi","onUpdate:modelValue":e[3]||(e[3]=i=>t.employee.diachi=i),placeholder:"Nhập địa chỉ",onInput:e[4]||(e[4]=i=>r.validateField("diachi")),required:""},null,544),[[d,t.employee.diachi]])]),t.errors.diachi?(n(),o("span",M,u(t.errors.diachi),1)):m("",!0)]),s("div",U,[e[15]||(e[15]=s("label",{for:"dienthoai"}," Điện thoại ",-1)),s("div",B,[e[14]||(e[14]=s("i",{class:"fas fa-phone-alt"},null,-1)),a(s("input",{type:"text",id:"dienthoai","onUpdate:modelValue":e[5]||(e[5]=i=>t.employee.dienthoai=i),placeholder:"Nhập số điện thoại",onInput:e[6]||(e[6]=i=>r.validateField("dienthoai")),required:""},null,544),[[d,t.employee.dienthoai]])]),t.errors.dienthoai?(n(),o("span",H,u(t.errors.dienthoai),1)):m("",!0)]),s("button",{class:"btn btn-primary",type:"submit",disabled:!t.isValid},e[16]||(e[16]=[s("i",{class:"fas fa-save"},null,-1),g(" Lưu Nhân Viên ")]),8,T)],544)])])}const L=y(V,[["render",D],["__scopeId","data-v-53b48c39"]]);export{L as default};
