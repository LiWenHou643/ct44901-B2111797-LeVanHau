import{r as p}from"./reader.service-Gnmip1OG.js";import{_ as k,p as b,c as n,a as t,t as l,d as a,i as y,w as h,v as u,e as v,j as x,g as _,o as i}from"./index-DTQSZOVP.js";import{c as S,a as m,d as V,e as w}from"./index.esm-BQ_k1baG.js";const M={data(){return{form:{holot:"",ten:"",ngaysinh:b(null),phai:"",dienthoai:"",diachi:"",matkhau:"",xacnhanmatkhau:""},errors:{},isSubmitting:!1,errorMessage:""}},methods:{format(d){const e=d.getDate(),r=d.getMonth()+1,c=d.getFullYear();return`${e}/${r}/${c}`},async handleSubmit(){var e;this.errors={};const d=S().shape({holot:m().required("Họ lót bạn không được để trống"),ten:m().required("Tên bạn không được để trống"),ngaysinh:V().required("Ngày sinh không được để trống").transform(r=>r===""?null:r).typeError("Ngày sinh không được để trống"),phai:m().required("Giới tính không được để trống"),dienthoai:m().matches(/^\d+$/,"Số điện thoại phải là số  hợp lệ").required("Số điện thoại không được để trống"),diachi:m().required("Địa chỉ không được để trống"),matkhau:m().min(6,"Mật khẩu tối thiểu 6 kí tự").required("Mật khẩu không được để trống"),xacnhanmatkhau:m().oneOf([w("matkhau"),null],"Xác nhận mật khẩu không khớp").required("Xác nhận mật khẩu không được để trống")});try{await d.validate(this.form,{abortEarly:!1}),this.isSubmitting=!0,await p.create(this.form),this.$store.dispatch("auth/setSuccessMessage","Đăng ký thành công"),this.$router.push("/login")}catch(r){console.log(r),r.response&&r.response.data&&r.response.data.message&&(this.errorMessage=r.response.data.message),(e=r==null?void 0:r.inner)==null||e.forEach(c=>{this.errors[c.path]=c.message})}finally{this.isSubmitting=!1}}}},N={class:"d-flex justify-content-center align-items-center p-3"},q={class:"card p-4 shadow-sm"},U={key:0,class:"alert alert-danger"},D={class:"row mb-3"},E={class:"col"},B={key:0,class:"text-danger"},C={class:"col"},T={key:0,class:"text-danger"},X={class:"row mb-3"},j={class:"col"},G={key:0,class:"text-danger"},H={class:"col"},K={key:0,class:"text-danger"},P={class:"row mb-3"},F={class:"col"},I={key:0,class:"text-danger"},O={class:"col"},R={key:0,class:"text-danger"},Y={class:"row mb-3"},z={class:"col"},A={key:0,class:"text-danger"},J={class:"col"},L={key:0,class:"text-danger"},Q=["disabled"];function W(d,e,r,c,s,f){const g=_("VueDatePicker");return i(),n("div",N,[t("div",q,[e[18]||(e[18]=t("h2",{class:"text-center mb-4"},"Đăng ký tài khoản",-1)),s.errorMessage?(i(),n("div",U,l(s.errorMessage),1)):a("",!0),t("form",{onSubmit:e[8]||(e[8]=y((...o)=>f.handleSubmit&&f.handleSubmit(...o),["prevent"]))},[t("div",D,[t("div",E,[e[9]||(e[9]=t("label",{for:"holot",class:"form-label"},"Họ lót",-1)),h(t("input",{type:"text",id:"holot",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>s.form.holot=o)},null,512),[[u,s.form.holot]]),s.errors.holot?(i(),n("div",B,l(s.errors.holot),1)):a("",!0)]),t("div",C,[e[10]||(e[10]=t("label",{for:"ten",class:"form-label"},"Tên",-1)),h(t("input",{type:"text",id:"ten",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>s.form.ten=o)},null,512),[[u,s.form.ten]]),s.errors.ten?(i(),n("div",T,l(s.errors.ten),1)):a("",!0)])]),t("div",X,[t("div",j,[e[11]||(e[11]=t("label",{for:"ngaysinh",class:"form-label"},"Ngày sinh",-1)),v(g,{modelValue:s.form.ngaysinh,"onUpdate:modelValue":e[2]||(e[2]=o=>s.form.ngaysinh=o),format:f.format,placeholder:"dd/mm/yyyy"},null,8,["modelValue","format"]),s.errors.ngaysinh?(i(),n("div",G,l(s.errors.ngaysinh),1)):a("",!0)]),t("div",H,[e[13]||(e[13]=t("label",{for:"phai",class:"form-label"},"Giới tính",-1)),h(t("select",{id:"phai",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=o=>s.form.phai=o)},e[12]||(e[12]=[t("option",{value:"",disabled:"",selected:""}," Chọn giới tính ",-1),t("option",{value:"Nam"},"Nam",-1),t("option",{value:"Nữ"},"Nữ",-1),t("option",{value:"Khác"},"Khác",-1)]),512),[[x,s.form.phai]]),s.errors.phai?(i(),n("div",K,l(s.errors.phai),1)):a("",!0)])]),t("div",P,[t("div",F,[e[14]||(e[14]=t("label",{for:"dienthoai",class:"form-label"},"Số điện thoại",-1)),h(t("input",{type:"text",id:"dienthoai",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=o=>s.form.dienthoai=o)},null,512),[[u,s.form.dienthoai]]),s.errors.dienthoai?(i(),n("div",I,l(s.errors.dienthoai),1)):a("",!0)]),t("div",O,[e[15]||(e[15]=t("label",{for:"diachi",class:"form-label"},"Địa chỉ",-1)),h(t("input",{type:"text",id:"diachi",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=o=>s.form.diachi=o)},null,512),[[u,s.form.diachi]]),s.errors.diachi?(i(),n("div",R,l(s.errors.diachi),1)):a("",!0)])]),t("div",Y,[t("div",z,[e[16]||(e[16]=t("label",{for:"matkhau",class:"form-label"},"Mật khẩu",-1)),h(t("input",{type:"password",id:"matkhau",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=o=>s.form.matkhau=o)},null,512),[[u,s.form.matkhau]]),s.errors.matkhau?(i(),n("div",A,l(s.errors.matkhau),1)):a("",!0)]),t("div",J,[e[17]||(e[17]=t("label",{for:"xacnhanmatkhau",class:"form-label"},"Xác nhận mật khẩu",-1)),h(t("input",{type:"password",id:"xacnhanmatkhau",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=o=>s.form.xacnhanmatkhau=o)},null,512),[[u,s.form.xacnhanmatkhau]]),s.errors.xacnhanmatkhau?(i(),n("div",L,l(s.errors.xacnhanmatkhau),1)):a("",!0)])]),t("button",{type:"submit",class:"btn btn-primary w-100",disabled:s.isSubmitting}," Đăng ký ",8,Q)],32)])])}const se=k(M,[["render",W],["__scopeId","data-v-8159b81c"]]);export{se as default};
